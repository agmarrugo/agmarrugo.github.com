
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>My blog post writing workflow with Dropbox and Hazel - andres marrugo</title>
  <meta name="author" content="Andres Marrugo">

  
  <meta name="description" content="It may seem that, for the most part, I’ve been blogging about blogging. No matter how pointless it seems, I do think that this could prove useful to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://agmarrugo.github.com/blog/2012/10/15/blog-post-writing-workflow-dropbox-hazel/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/andresmarrugo" rel="alternate" title="andres marrugo" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<script src="/javascripts/footnotify.js"></script>

<!-- Social media content metadata -->

<meta property="fb:app_id" content="688168701320097" />
<meta property="og:type" content="article" />
<meta property="og:title" content="My blog post writing workflow with Dropbox and Hazel" />
<meta property="og:site_name" content="andres marrugo" />
<meta property="og:url" content="http://agmarrugo.github.com/blog/2012/10/15/blog-post-writing-workflow-dropbox-hazel/" />
<meta property="og:description" content="It may seem that, for the most part, I’ve been blogging about blogging. No matter how pointless it seems, I do think that this could prove useful to someone, in the same way I have benefited from &hellip;" />
<meta property="og:author" content="https://www.facebook.com/andres.g.marrugo" />



<meta property="twitter:card" content="summary" />
<meta property="twitter:site" content="agmarrugo" />
<meta property="twitter:url" content="http://agmarrugo.github.com/blog/2012/10/15/blog-post-writing-workflow-dropbox-hazel/" />
<meta property="twitter:title" content="My blog post writing workflow with Dropbox and Hazel" />
<meta property="twitter:description" content="It may seem that, for the most part, I’ve been blogging about blogging. No matter how pointless it seems, I do think that this could prove useful to someone, in the same way I have benefited from &hellip;" />
<meta property="twitter:creator" content="agmarrugo" />



  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34225633-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">andres marrugo</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="http://feeds.feedburner.com/andresmarrugo" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="http://feedburner.google.com/fb/a/mailverify?uri=andresmarrugo&amp;loc=en_US" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:agmarrugo.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>	
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/es/">Espa&ntilde;ol</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">My Blog Post Writing Workflow With Dropbox and Hazel</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-10-15T23:44:00-05:00" pubdate data-updated="true">Oct 15<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>It may seem that, for the most part, I’ve been blogging about blogging. No matter how pointless it seems, I <em>do</em> think that this could prove useful to someone, in the same way I have benefited from others while setting up this site<sup id="fnref:foo2"><a href="#fn:foo2" rel="footnote">1</a></sup>.</p>

<p>One of the things I like about having an <a href="http://octopress.org/" title="Octopress">Octopress</a> driven <code>txt</code>-only blog is that I have the liberty to set things my way. The topic I am addressing here is that of writing blog posts on different devices<sup id="fnref:foo1"><a href="#fn:foo1" rel="footnote">2</a></sup> with the help of Dropbox<sup id="fnref:foo5"><a href="#fn:foo5" rel="footnote">3</a></sup> and <a href="http://www.noodlesoft.com/hazel.php" title="Noodlesoft | Hazel">Hazel</a>. I’m still working out the whole remote blogging thing, this is but the first stage of a soon-to-be remote blogging workflow with Octopress. </p>

<!--more-->

<!-- When I say "different devices" I actually mean three:

- A Macbook Pro at the office, almost always on.
- A Mac Mini at home, often on, but not necessary logged in my user.
- An iPod Touch, always with me. -->

<h2 id="my-blog-post-writing-workflow">My blog post writing workflow</h2>

<p>Ideally any blog post starts with an idea that I write down in a text file named <code>runx-blog_ideas-qqq.txt</code><sup id="fnref:foo3"><a href="#fn:foo3" rel="footnote">4</a></sup>. This is done either on any of the two Macs using <a href="http://brettterpstra.com/project/nvalt/" title="nvALT 2.1 - Notational Velocity Fork">nvAlt</a> or on my iOS device using any text editor<sup id="fnref:foo4"><a href="#fn:foo4" rel="footnote">5</a></sup>. I <em>always</em> write in <a href="http://daringfireball.net/projects/markdown/" title="Daring Fireball: Markdown">Markdown</a> (technically I <em>mostly</em> write in <a href="http://fletcherpenney.net/multimarkdown/" title="MultiMarkdown">Multimarkdown</a>, but that’s another thing). </p>

<p>After I decide that this idea is ready to become a draft, I create a text file that follows the same name convention for Octopress (<code>2012-10-14-Post-title.text</code>) on a folder named <code>_drafts</code> that resides in the <code>source</code>. You might have noticed that the extension is not <code>.markdown</code> and that is because I was having issues <a href="http://brettterpstra.com/fixing-spotlight-indexing-of-markdown-content/" title="Fixing Spotlight indexing of Markdown content - Brett Terpstra">making Hazel read the contents of markdown files</a>. So I opted for <code>.text</code> which is technically the same as <code>.txt</code>, but I would differentiate them as drafts and most <em>importantly</em> <a href="http://macsparky.com/2009/6/3/sorting-and-moving-documents-with-hazel.html" title="Sorting and Moving Documents with Hazel — MacSparky">Hazel will be able to do its magic</a>.</p>

<p>The underscore (<code>_</code>) on the name of the drafts folder is so that it won’t be deployed, just as the posts folder</p>

<pre><code>source/
|__ _drafts/
|__ _posts/
</code></pre>

<p>With the help of <a href="http://www.ergonis.com/products/typinator/" title="Typinator - the fastest text expander in town">Typinator</a> on my mac or <a href="http://smilesoftware.com/TextExpander/touch/index.html" title="TextExpander touch: iOS Typing Shortcuts for iPhone and iPad">Textexpander</a> on my iPod I create the yaml header like this</p>

<pre><code>--- 
layout: post 
title: "Post title" 
date: 2012-10-14 23:28 
author: Andres Marrugo 
comments: true 
published: false 
categories: [blog] 
--- 
</code></pre>

<p>Notice that <code>published: false</code>, which means <em>it is a draft</em>. When I’m finished with the post I’ll change it to <code>true</code>. </p>

<h3 id="the-syncing">The Syncing</h3>

<p>The Syncing is done via Dropbox, because any iOS text editor comes with Dropbox support. iCloud has still a long way to go. Because my octopress folder does not reside in the Dropbox folder I made symlinks on my Mac to the <code>_posts</code>, <code>_drafts</code>, and <code>images</code> folders so they get synced </p>

<pre><code>ln -s ~/octopress/source/_posts/ ~/Dropbox/PlainText/blog/_posts
ln -s ~/octopress/source/images/ ~/Dropbox/PlainText/blog/images
ln -s ~/octopress/source/_drafts/ ~/Dropbox/PlainText/blog/_drafts
</code></pre>

<p>On any other machine they become actual folders.</p>

<h3 id="automating-with-hazel">Automating with Hazel</h3>

<p>Ideally I would like to change the <code>published: false</code> to <code>true</code> and have it posted to my site, but it still requires some workarounds and this is why for the time being my hazel magic script only moves the file to the <code>_posts</code> folder when the published option changes to <code>true</code>. I then generate the site and deploy it manually, but this will soon be automated as well.</p>

<p>There are actually two Hazel rules for this. It first monitors the <code>_drafts</code> folder for files whose content contains the phrase <code>published: true</code>. When this happens the file gets moved to the folder <code>_posts</code>.</p>

<div class="aic" style="width:500px"><a href="http://www.flickr.com/photos/copiancestral/7913589162/" title="drafts-move-to-posts-hazel by copiancestral, on Flickr"><img src="http://farm9.staticflickr.com/8038/7913589162_551eed930a.jpg" width="500" height="243" alt="drafts-move-to-posts-hazel" /></a><br />
Move file to _posts folder.</div>

<p>Then the second rule is for the <code>_posts</code> folder. If the extension is <code>text</code> (which means it was a draft that recently got moved) it will run a shell script.</p>

<div class="aic" style="width:500px"><a href="http://www.flickr.com/photos/copiancestral/7913591478/" title="posts-modify-latest-post-hazel by copiancestral, on Flickr"><img src="http://farm9.staticflickr.com/8458/7913591478_f75d933161.jpg" width="500" height="356" alt="posts-modify-latest-post-hazel" /></a><br />
Modify latest post.</div>

<p>The shell script is the following. What it does is to replace the date with the current date – you see, several days could’ve passed since I created the draft – in both the yaml header and the file name. And the other thing it does is to change the extension to <code>.markdown</code>.  </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Move to posts folder   </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="c"># Replace yaml header date to current date </span>
</span><span class="line">sed <span class="s2">&quot;s/[0-9]\{4\}.*:[0-9]\{2\}/`date &#39;+%Y-%m-%d %H:%M&#39;`/&quot;</span> <span class="nv">$1</span> &gt; tmp <span class="o">&amp;&amp;</span> mv tmp <span class="nv">$1</span>
</span><span class="line">
</span><span class="line"><span class="nv">mydate</span><span class="o">=</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d&#39;</span><span class="k">)</span>
</span><span class="line"><span class="nv">fname</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$1</span> | sed <span class="s2">&quot;s/text/markdown/&quot;</span><span class="k">)</span>
</span><span class="line"><span class="c"># Rename file to current date</span>
</span><span class="line">mv <span class="nv">$1</span> <span class="sb">`</span><span class="nb">echo</span> <span class="nv">$fname</span> | sed <span class="s2">&quot;s/[0-9]\{4\}.*-[0-9]\{2\}-[0-9]\{2\}/$mydate/&quot;</span><span class="sb">`</span>
</span><span class="line">	
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>It may look like there’s not much automation, but if you think that this runs on my Mac while I’m writing it in my iPod Touch, then it gets really interesting, and the possibilities are almost infinite. Besides, updating the post date, moving files and changing extensions are quite tedious tasks by themselves. To make it automatically generate and deploy the site I’d have to add several more lines to the script, but I’m ok with how it is for now. </p>

<div class="footnotes">
  <ol>
    <li id="fn:foo2">
      <p>Special thanks to <a href="http://www.neilsmithline.com/">Neil Smithline</a> for helping me out on <a href="https://github.com/imathis/octopress/issues/708">the two blogs one domain issue</a>.<a href="#fnref:foo2" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:foo1">
      <p>My Mac or my iPod touch.<a href="#fnref:foo1" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:foo5">
      <p>I can’t really write this post without mentioning two posts that served as inspiration and reference: <a href="http://instant-thinking.de/2012/08/03/synced-and-scheduled-blogging-with-octopress/">“Synced and scheduled blogging with octopress”</a> and <a href="http://www.macstories.net/stories/my-dropbox-writing-workflow/" title="My Dropbox Writing Workflow">“My Dropbox Writing Workflow.”</a><a href="#fnref:foo5" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:foo3">
      <p>In some future post I’ll explain my note taking workflow and how I name files. In this case I use <a href="http://www.kungfugrippe.com/post/453204090/q-trick">Merlin Mann’s <code>q</code> trick</a> and the <code>runx</code> stands for running notes.<a href="#fnref:foo3" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:foo4">
      <p>I use several editors, but mainly <a href="http://bywordapp.com/" title="Byword &bull; A Simple Text Editor for Mac and iOS">Byword</a>, <a href="http://writeup.prasannag.com/" title="WriteUp - with Dropbox">WriteUp </a>, <a href="http://www.secondgearsoftware.com/elements/" title="Elements &mdash; Dropbox powered text editor for iPhone, iPad and iPod touch from Second Gear">Elements</a>, and <a href="http://nebulousapps.net/" title="Nebulous Notes">Nebulous Notes</a>.<a href="#fnref:foo4" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Andres Marrugo</span></span>

      








  


<time datetime="2012-10-15T23:44:00-05:00" pubdate data-updated="true">Oct 15<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/blogging/'>blogging</a>, <a class='category' href='/blog/categories/mac/'>mac</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://agmarrugo.github.com/blog/2012/10/15/blog-post-writing-workflow-dropbox-hazel/" data-via="agmarrugo" data-counturl="http://agmarrugo.github.com/blog/2012/10/15/blog-post-writing-workflow-dropbox-hazel/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/10/07/spanish-keyboard-and-aperture/" title="Previous Post: Spanish keyboard and Aperture">&laquo; Spanish keyboard and Aperture</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/10/18/image-to-pdf-with-automator-and-imagemagick/" title="Next Post: Convert Image to PDF with Automator and Imagemagick">Convert Image to PDF with Automator and Imagemagick &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2018/11/20/attending-laop/">Attending LAOP</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/12/how-i-do-presentations/">How I do Presentations</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/06/09/group-images-by-person/">Group Images by Person</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/01/30/get-fridays/">Get Fridays</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/19/grading-lab-reports-workflow/">Grading lab reports workflow</a>
      </li>
    
  </ul>
</section>
<section>
	<h1>Subscribe</h1>

	<div id="thumbs">
	   <div class="smallsection">
			<a href="http://feeds.feedburner.com/andresmarrugo"><img width=24px class=noborder align="left" src="/images/rss_style.png" alt="RSS Feed" title="RSS (English feed)"></a>
	   </div> 
		<div class="smallsection">
			<a href="http://feedburner.google.com/fb/a/mailverify?uri=andresmarrugo&amp;loc=en_US"><img width=24px class=noborder align="left" src="/images/mail.png" alt="email" title="Email (English feed)"> </a>
		</div>
		<div class="smallsection">
			<a href="http://feeds.feedburner.com/agmarrugo_en_es"><img width=24px class=noborder align="left" src="/images/rss_style.png" alt="RSS Feed" title="RSS (English + Spanish feed)"></a>
		</div>
		<div class="smallsection">
			<a href="http://feedburner.google.com/fb/a/mailverify?uri=agmarrugo_en_es&amp;loc=en_US"><img width=24px class=noborder align="left" src="/images/mail.png" alt="email" title="Email (English + Spanish feed)"> </a> 
		</div>
	</div>​


</section>
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - <a href="/about">Andres Marrugo</a> -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'andresmarrugo';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://agmarrugo.github.com/blog/2012/10/15/blog-post-writing-workflow-dropbox-hazel/';
        var disqus_url = 'http://agmarrugo.github.com/blog/2012/10/15/blog-post-writing-workflow-dropbox-hazel/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
